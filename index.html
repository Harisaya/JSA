<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DarkHub - Marketplace To√†n N·ªÅn T·∫£ng</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- HEADER -->
        <header class="header">
            <div class="header-wrapper">
                <!-- LEFT: Logo -->
                <div class="logo">
                    <span class="logo-emoji">üõç</span>
                    <span class="logo-text">DarkHub</span>
                </div>

                <!-- CENTER: City & Search -->
                <div class="header-center">
                    <div class="city-selector">
                        <span>üìç</span>
                        <select id="citySelect" class="city-dropdown">
                            <option value="Dubai">Dubai</option>
                            <option value="Abu Dhabi">Abu Dhabi</option>
                            <option value="Sharjah">Sharjah</option>
                        </select>
                    </div>
                </div>

                <!-- RIGHT: Search & Cart -->
                <div class="header-right">
                    <div class="search-box">
                        <input type="text" id="headerSearch" placeholder="T√¨m s·∫£n ph·∫©m..." class="header-search">
                        <span class="search-icon">üîç</span>
                    </div>
                    <a href="search.html" class="nav-link">T√¨m Ki·∫øm</a>
                    <a href="cart.html" class="nav-link">üõí Gi·ªè H√†ng</a>
                    <a href="orders.html" class="nav-link">üì¶ ƒê∆°n H√†ng</a>
                    <a href="profile.html" class="nav-link">üë§ H·ªì S∆°</a>
                </div>
            </div>

            <!-- CATEGORY NAVBAR -->
            <nav class="category-navbar">
                <a href="#" class="category-nav-item active" data-category="all">üì¶ T·∫•t C·∫£</a>
                <a href="#" class="category-nav-item" data-category="food">üçî Th·ª±c Ph·∫©m</a>
                <a href="#" class="category-nav-item" data-category="medicine">üíä Thu·ªëc</a>
                <a href="#" class="category-nav-item" data-category="accessories">üëó Ph·ª• Ki·ªán</a>
                <a href="#" class="category-nav-item" data-category="beauty">üíÑ M·ªπ Ph·∫©m</a>
                <a href="#" class="category-nav-item" data-category="electronics">üì± ƒêi·ªán T·ª≠</a>
                <a href="#" class="category-nav-item" data-category="home">üõãÔ∏è Nh√†</a>
                <a href="#" class="category-nav-item" data-category="sports">‚öΩ Th·ªÉ Thao</a>
            </nav>
        </header>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <!-- HOME PAGE -->
            <section id="home-page" class="tab-content active">
                <!-- Banner -->
                <section class="banner-section">
                    <div class="banner">
                        <h2>Mua S·∫Øm To√†n N·ªÅn T·∫£ng</h2>
                        <p>Th·ª±c ph·∫©m, qu·∫ßn √°o, ƒëi·ªán t·ª≠, ƒë·ªì gia d·ª•ng & h∆°n th·∫ø n·ªØa</p>
                    </div>
                </section>

                <!-- Search/Filter Section -->
                <section class="filters-section">
                    <div class="search-section">
                        <input type="text" id="mainSearch" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." class="main-search">
                        <span class="search-icon">üîç</span>
                    </div>
                </section>

                <!-- Products Grid -->
                <section class="restaurants-section">
                    <div id="loading" class="loading-spinner">
                        <div class="spinner"></div>
                        <p>ƒêang t·∫£i s·∫£n ph·∫©m...</p>
                    </div>
                    <div id="restaurantsList" class="restaurants-grid"></div>
                    <div id="emptyState" class="empty-state" style="display:none;">
                        <div class="empty-icon">üì¶</div>
                        <h3>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m</h3>
                        <p>Th·ª≠ t√¨m ki·∫øm ho·∫∑c thay ƒë·ªïi danh m·ª•c</p>
                    </div>
                </section>
            </section>

            <!-- SEARCH PAGE -->
            <section id="search-page" class="tab-content">
                <div class="filters-section">
                    <div class="search-section">
                        <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm s·∫£n ph·∫©m..." class="main-search">
                        <span class="search-icon">üîç</span>
                    </div>
                    <div class="category-filter">
                        <button class="category-btn active" onclick="filterCategory('all')">T·∫•t C·∫£</button>
                        <button class="category-btn" onclick="filterCategory('food')">Th·ª±c Ph·∫©m</button>
                        <button class="category-btn" onclick="filterCategory('fashion')">Qu·∫ßn √Åo</button>
                        <button class="category-btn" onclick="filterCategory('electronics')">ƒêi·ªán T·ª≠</button>
                        <button class="category-btn" onclick="filterCategory('home')">ƒê·ªì Gia D·ª•ng</button>
                    </div>
                </div>
                <div class="restaurants-grid" id="searchResults">
                    <div style="grid-column: 1/-1; text-align: center; padding: 3rem; color: #888;">
                        <p>Nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm ƒë·ªÉ xem k·∫øt qu·∫£</p>
                    </div>
                </div>
            </section>

            <!-- CART PAGE -->
            <section id="cart-page" class="tab-content">
                <div class="cart-container">
                    <h1 class="page-title">Gi·ªè H√†ng</h1>
                    <div class="cart-content">
                        <div class="cart-items-section">
                            <div class="empty-cart" id="emptyCartMsg">
                                <div class="empty-icon">üõí</div>
                                <h3 style="color: #f0f0f0;">Gi·ªè h√†ng tr·ªëng</h3>
                                <p>H√£y th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng ƒë·ªÉ ti·∫øp t·ª•c</p>
                                <button onclick="switchPage('home')" style="display: inline-block; margin-top: 1rem; padding: 0.75rem 1.5rem; color: white; background: #FF006E; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer;">
                                    Ti·∫øp t·ª•c mua s·∫Øm
                                </button>
                            </div>
                            <div id="cartItems"></div>
                        </div>
                        <div class="cart-summary-section">
                            <div class="summary-title">T√≥m T·∫Øt ƒê∆°n H√†ng</div>
                            <div class="summary-row">
                                <span>T·ªïng ti·ªÅn h√†ng:</span>
                                <span id="subtotal">0 AED</span>
                            </div>
                            <div class="summary-row">
                                <span>Ph√≠ giao h√†ng:</span>
                                <span id="shipping">0 AED</span>
                            </div>
                            <div class="summary-row total">
                                <span>T·ªïng c·ªông:</span>
                                <span id="total">0 AED</span>
                            </div>
                            <button class="checkout-btn" id="checkoutBtn" disabled>ƒê·∫∑t H√†ng</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ORDERS PAGE -->
            <section id="orders-page" class="tab-content">
                <div class="orders-container">
                    <h1 class="page-title">ƒê∆°n H√†ng C·ªßa T√¥i</h1>
                    <div class="orders-grid" id="ordersList">
                        <div style="grid-column: 1/-1; text-align: center; padding: 3rem; color: #888;">
                            <p>B·∫°n ch∆∞a c√≥ ƒë∆°n h√†ng n√†o</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PROFILE PAGE -->
            <section id="profile-page" class="tab-content">
                <div class="profile-container">
                    <div class="profile-header">
                        <div class="profile-avatar">üë§</div>
                        <div class="profile-name" id="profileName">Nguy·ªÖn VƒÉn A</div>
                        <div class="profile-email" id="profileEmail">nguyenvan@example.com</div>
                        <button class="edit-btn" onclick="alert('T√≠nh nƒÉng ch·ªânh s·ª≠a s·∫Ω s·ªõm c√≥')">Ch·ªânh S·ª≠a H·ªì S∆°</button>
                    </div>

                    <div class="profile-section">
                        <h2 class="section-title">Th√¥ng Tin C√° Nh√¢n</h2>
                        <div class="info-group">
                            <span class="info-label">Email:</span>
                            <span class="info-value" id="infoEmail">nguyenvan@example.com</span>
                        </div>
                        <div class="info-group">
                            <span class="info-label">S·ªë ƒëi·ªán tho·∫°i:</span>
                            <span class="info-value" id="infoPhone">+971 50 123 4567</span>
                        </div>
                        <div class="info-group">
                            <span class="info-label">Th√†nh ph·ªë:</span>
                            <span class="info-value" id="infoCity">Dubai</span>
                        </div>
                        <div class="info-group">
                            <span class="info-label">ƒê·ªãa ch·ªâ:</span>
                            <span class="info-value" id="infoAddress">123 Main Street, Dubai, UAE</span>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h2 class="section-title">Th√¥ng Tin T√†i Kho·∫£n</h2>
                        <div class="info-group">
                            <span class="info-label">Ng√†y t·∫°o:</span>
                            <span class="info-value" id="createdDate">15/01/2025</span>
                        </div>
                        <div class="info-group">
                            <span class="info-label">Tr·∫°ng th√°i:</span>
                            <span class="info-value" id="accountStatus">Ho·∫°t ƒë·ªông</span>
                        </div>
                        <div class="info-group">
                            <span class="info-label">T·ªïng ƒë∆°n h√†ng:</span>
                            <span class="info-value" id="totalOrders">0</span>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h2 class="section-title">Li√™n K·∫øt Nhanh</h2>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <button onclick="switchPage('orders')" style="padding: 1rem; background: #2d2d2d; border: none; border-radius: 0.5rem; text-align: center; color: #FF006E; text-decoration: none; font-weight: 600; cursor: pointer;">ƒê∆°n H√†ng C·ªßa T√¥i</button>
                            <button onclick="switchPage('cart')" style="padding: 1rem; background: #2d2d2d; border: none; border-radius: 0.5rem; text-align: center; color: #FF006E; text-decoration: none; font-weight: 600; cursor: pointer;">Gi·ªè H√†ng</button>
                        </div>
                    </div>

                    <button class="logout-btn" onclick="handleLogout()">ƒêƒÉng Xu·∫•t</button>
                </div>
            </section>
        </main>
    </div>

    <!-- MODALS -->
    <!-- Product Detail Modal -->
    <div id="restaurantModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content restaurant-modal">
            <button class="modal-close">&times;</button>
            <div id="restaurantContent"></div>
        </div>
    </div>

    <!-- Cart Modal (Alternative view) -->
    <div id="cartModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content cart-modal">
            <button class="modal-close">&times;</button>
            <div class="cart-body">
                <div id="cartContent"></div>
            </div>
            <div class="cart-footer">
                <div class="price-summary" id="priceSummary"></div>
                <button id="checkoutBtn2" class="checkout-btn">Thanh to√°n</button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS - Inlined to avoid 404 errors -->
    <script>
        // CONFIG
        const RAPIDAPI_KEY = 'f95461abeemsh6e3039e52116ac7p152f3ajsnd300217a2f54';
        const RAPIDAPI_HOST = 'talabat.p.rapidapi.com';
        const DELIVERY_FEE = 5;

        // DOM Elements
        const elements = {
            citySelect: document.getElementById('citySelect'),
            headerSearch: document.getElementById('headerSearch'),
            mainSearch: document.getElementById('mainSearch'),
            sortSelect: document.getElementById('sortSelect'),
            categoryBtns: document.querySelectorAll('.category-btn'),
            restaurantsList: document.getElementById('restaurantsList'),
            loadingSpinner: document.getElementById('loading'),
            emptyState: document.getElementById('emptyState'),
            cartButton: document.getElementById('cartButton'),
            cartBadge: document.getElementById('cartBadge'),
            restaurantModal: document.getElementById('restaurantModal'),
            restaurantContent: document.getElementById('restaurantContent'),
            cartModal: document.getElementById('cartModal'),
            cartContent: document.getElementById('cartContent'),
            notification: document.getElementById('notification'),
        };

        // Global State
        const state = {
            restaurants: [],
            filteredRestaurants: [],
            selectedRestaurant: null,
            cart: [],
            currentCity: 'Dubai',
            searchQuery: '',
            selectedCategory: 'all',
            sortBy: 'popular'
        };

        // MOCK DATA
        function getMockRestaurants() {
            return [
                // Food Category
                { id: 1, name: 'Pizza Paradise', category: 'food', cuisines: ['Pizza'], rating: 4.8, deliveryTime: '25-35 mins', deliveryFee: 'AED 5', minOrder: 'AED 25', reviews: 1250, image: 'https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=400&h=300&fit=crop' },
                { id: 2, name: 'Biryani House', category: 'food', cuisines: ['Asian'], rating: 4.6, deliveryTime: '30-40 mins', deliveryFee: 'AED 4', minOrder: 'AED 30', reviews: 980, image: 'https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=400&h=300&fit=crop' },
                { id: 3, name: 'Burger Barn', category: 'food', cuisines: ['Fast Food'], rating: 4.5, deliveryTime: '20-30 mins', deliveryFee: 'AED 3', minOrder: 'AED 20', reviews: 2100, image: 'https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=400&h=300&fit=crop' },
                { id: 4, name: 'Sweet Cakes', category: 'food', cuisines: ['Desserts'], rating: 4.9, deliveryTime: '15-25 mins', deliveryFee: 'AED 2', minOrder: 'AED 15', reviews: 750, image: 'https://images.unsplash.com/photo-1578985545062-69928b1d9587?w=400&h=300&fit=crop' },
                { id: 5, name: 'Sushi Master', category: 'food', cuisines: ['Asian'], rating: 4.7, deliveryTime: '35-45 mins', deliveryFee: 'AED 6', minOrder: 'AED 35', reviews: 890, image: 'https://images.unsplash.com/photo-1553861519-cdde9b8ec4a5?w=400&h=300&fit=crop' },
                
                // Fashion Category
                { id: 6, name: 'Style Hub', category: 'fashion', cuisines: ['√Åo kho√°c'], rating: 4.7, deliveryTime: '1-2 ng√†y', deliveryFee: 'AED 8', minOrder: 'AED 50', reviews: 2340, image: 'https://images.unsplash.com/photo-1554521722-7be0672eef4d?w=400&h=300&fit=crop' },
                { id: 7, name: 'Urban Threads', category: 'fashion', cuisines: ['Qu·∫ßn jeans'], rating: 4.6, deliveryTime: '1-2 ng√†y', deliveryFee: 'AED 7', minOrder: 'AED 45', reviews: 1890, image: 'https://images.unsplash.com/photo-1542272604-787c62d465d1?w=400&h=300&fit=crop' },
                { id: 8, name: 'Premium Wear', category: 'fashion', cuisines: ['√Åo nam'], rating: 4.8, deliveryTime: '1-2 ng√†y', deliveryFee: 'AED 9', minOrder: 'AED 60', reviews: 3100, image: 'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?w=400&h=300&fit=crop' },
                
                // Electronics Category
                { id: 9, name: 'Tech Store', category: 'electronics', cuisines: ['ƒêi·ªán tho·∫°i'], rating: 4.9, deliveryTime: '2-3 ng√†y', deliveryFee: 'AED 15', minOrder: 'AED 200', reviews: 4500, image: 'https://images.unsplash.com/photo-1511707267537-b85faf00021e?w=400&h=300&fit=crop' },
                { id: 10, name: 'Gadget Zone', category: 'electronics', cuisines: ['Tai nghe'], rating: 4.7, deliveryTime: '1-2 ng√†y', deliveryFee: 'AED 10', minOrder: 'AED 80', reviews: 2800, image: 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400&h=300&fit=crop' },
                { id: 11, name: 'Smart Electronics', category: 'electronics', cuisines: ['M√°y t√≠nh'], rating: 4.8, deliveryTime: '2-3 ng√†y', deliveryFee: 'AED 18', minOrder: 'AED 300', reviews: 3200, image: 'https://images.unsplash.com/photo-1588872657840-218e412ee91e?w=400&h=300&fit=crop' },
                
                // Home Goods Category
                { id: 12, name: 'Home Comfort', category: 'home', cuisines: ['ƒê·ªám'], rating: 4.6, deliveryTime: '3-5 ng√†y', deliveryFee: 'AED 20', minOrder: 'AED 150', reviews: 1950, image: 'https://images.unsplash.com/photo-1554995207-c18210cc9b1d?w=400&h=300&fit=crop' },
                { id: 13, name: 'Interior Bliss', category: 'home', cuisines: ['B√†n'], rating: 4.7, deliveryTime: '3-5 ng√†y', deliveryFee: 'AED 25', minOrder: 'AED 200', reviews: 2600, image: 'https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=400&h=300&fit=crop' },
                { id: 14, name: 'Living Essentials', category: 'home', cuisines: ['Gh·∫ø'], rating: 4.8, deliveryTime: '3-5 ng√†y', deliveryFee: 'AED 22', minOrder: 'AED 180', reviews: 3400, image: 'https://images.unsplash.com/photo-1555041469-a586c61ea9bc?w=400&h=300&fit=crop' },
                
                // Medicine Category
                { id: 15, name: 'PharmaCare', category: 'medicine', cuisines: ['Vitamin'], rating: 4.9, deliveryTime: '30-45 mins', deliveryFee: 'AED 3', minOrder: 'AED 20', reviews: 3450, image: 'https://images.unsplash.com/photo-1587854692152-cbe660dbde0f?w=400&h=300&fit=crop' },
                { id: 16, name: 'Health Plus', category: 'medicine', cuisines: ['Thu·ªëc'], rating: 4.7, deliveryTime: '45-60 mins', deliveryFee: 'AED 4', minOrder: 'AED 30', reviews: 2100, image: 'https://images.unsplash.com/photo-1576091160550-112173f7f869?w=400&h=300&fit=crop' },
                
                // Beauty Category
                { id: 17, name: 'Beauty Glow', category: 'beauty', cuisines: ['Skincare'], rating: 4.8, deliveryTime: '1-2 ng√†y', deliveryFee: 'AED 6', minOrder: 'AED 40', reviews: 2890, image: 'https://images.unsplash.com/photo-1556228578-8c89e6adf883?w=400&h=300&fit=crop' },
                { id: 18, name: 'Makeup Studio', category: 'beauty', cuisines: ['Makeup'], rating: 4.6, deliveryTime: '1-2 ng√†y', deliveryFee: 'AED 7', minOrder: 'AED 50', reviews: 1980, image: 'https://images.unsplash.com/photo-1599599810694-b3a7f1d88416?w=400&h=300&fit=crop' },
                
                // Accessories Category
                { id: 19, name: 'Fashion Corner', category: 'accessories', cuisines: ['T√∫i'], rating: 4.7, deliveryTime: '1-2 ng√†y', deliveryFee: 'AED 8', minOrder: 'AED 55', reviews: 2340, image: 'https://images.unsplash.com/photo-1548036328-c9fa89d128fa?w=400&h=300&fit=crop' },
                { id: 20, name: 'Accessory Hub', category: 'accessories', cuisines: ['Trang s·ª©c'], rating: 4.5, deliveryTime: '1-2 ng√†y', deliveryFee: 'AED 9', minOrder: 'AED 60', reviews: 1650, image: 'https://images.unsplash.com/photo-1599643478518-a784e5dc4c8f?w=400&h=300&fit=crop' },
                
                // Sports Category
                { id: 21, name: 'Sports Zone', category: 'sports', cuisines: ['Gi√†y'], rating: 4.8, deliveryTime: '2-3 ng√†y', deliveryFee: 'AED 12', minOrder: 'AED 100', reviews: 3200, image: 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400&h=300&fit=crop' },
                { id: 22, name: 'Athlete Store', category: 'sports', cuisines: ['Qu·∫ßn √°o'], rating: 4.6, deliveryTime: '2-3 ng√†y', deliveryFee: 'AED 11', minOrder: 'AED 90', reviews: 2100, image: 'https://images.unsplash.com/photo-1518611505868-48b60c3ec1d3?w=400&h=300&fit=crop' }
            ];
        }

        function getMockMenu(restaurantId) {
            const menus = {
                1: [ 
                    { id: 101, name: 'Margherita', description: 'Mozzarella, tomato, basil', price: 35, image: 'https://images.unsplash.com/photo-1604068549290-dea0e4a305ca?w=200&h=200&fit=crop' },
                    { id: 102, name: 'Pepperoni', description: 'Pepperoni pizza', price: 45, image: 'https://images.unsplash.com/photo-1628840042765-356cda07f423?w=200&h=200&fit=crop' }
                ],
                2: [
                    { id: 201, name: 'Chicken Biryani', description: 'Spiced chicken with basmati rice', price: 50, image: 'https://images.unsplash.com/photo-1601050690597-df0568f70950?w=200&h=200&fit=crop' },
                    { id: 202, name: 'Mutton Biryani', description: 'Lamb biryani', price: 60, image: 'https://images.unsplash.com/photo-1633686976498-2f96e51ee33d?w=200&h=200&fit=crop' }
                ]
            };
            return menus[restaurantId] || [];
        }
    </script>

    <script src="main.js"></script>

    <script>
        // Initialize app after all scripts loaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log('[v0] Initializing DarkHub app...');
            
            // Category navigation
            const categoryNavItems = document.querySelectorAll('.category-nav-item');
            categoryNavItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    categoryNavItems.forEach(i => i.classList.remove('active'));
                    item.classList.add('active');
                    state.selectedCategory = item.dataset.category;
                    filterAndSortRestaurants();
                });
            });

            // Search boxes
            const mainSearch = document.getElementById('mainSearch');
            const headerSearch = document.getElementById('headerSearch');
            if (mainSearch) {
                mainSearch.addEventListener('input', (e) => {
                    state.searchQuery = e.target.value.toLowerCase();
                    filterAndSortRestaurants();
                });
            }
            if (headerSearch) {
                headerSearch.addEventListener('input', (e) => {
                    state.searchQuery = e.target.value.toLowerCase();
                    filterAndSortRestaurants();
                });
            }

            // Load data
            loadRestaurants();
        });
    </script>
</body>
</html>
